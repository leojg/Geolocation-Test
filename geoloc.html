<!DOCTYPE html>
<html>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
	<script>
var lat, lon;

var map;

$(document).ready(function inicio() {
	geolocalizar();
});

function geolocalizar() {
	navigator.geolocation.getCurrentPosition(mostrar, correrEnCirculos);
}

function correrEnCirculos(errorh) {
	alert("OH! NOES! EVERYBODY PANIC!");
	console.log(errorsh);
}

function mostrar(geo)
{
	
	lat = geo.coords.latitude;
	lon = geo.coords.longitude;


	cargarMapa();
	
}

function cargarMapa() {


	var loc = new google.maps.LatLng(lat,lon);
	

	var myOptions = {
	zoom: 17,
	center: loc,
	mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	
	try {
	map = new google.maps.Map($("#map_canvas").get(0), myOptions);
	}
	catch (err){
	document.write(err);
	}
	
	var coorMarcador = new google.maps.LatLng(lat,lon);
	var marcador = new google.maps.Marker({
		position: coorMarcador,
		map: map,
		title: "Ubicacion"
	});
}

         

</script>

</html>

<body>
	<header><h1>Test de Html5 Geolocation by @leojg2091</h1></header>
    <div id='map_canvas' style='width:100%; height:400px;'>
	</div>

</body>